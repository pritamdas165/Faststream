 <!DOCTYPE html>
<html>
<head>
  <title>Netflix Style Movie App</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, Helvetica, sans-serif;
      background: #141414;
      color: white;
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 40px;
      background: #000;
      position: sticky;
      top: 0;
      z-index: 100;
    }

    header h1 {
      color: red;
      margin: 0;
    }

    .search-box input {
      padding: 8px;
      border-radius: 4px;
      border: none;
      width: 220px;
    }

    .search-box button {
      padding: 8px 12px;
      background: red;
      border: none;
      color: white;
      border-radius: 4px;
      cursor: pointer;
    }

    .hero {
      height: 60vh;
      background-size: cover;
      background-position: center;
      display: flex;
      align-items: flex-end;
      padding: 40px;
      background-color: #000;
    }

    .hero h2 {
      font-size: 40px;
      margin: 0;
    }

    h3 {
      margin-left: 40px;
    }

    .movie-row {
      display: flex;
      overflow-x: auto;
      padding: 20px 40px;
      gap: 15px;
    }

    .movie-row img {
      width: 150px;
      border-radius: 6px;
      transition: transform 0.3s;
      cursor: pointer;
    }

    .movie-row img:hover {
      transform: scale(1.1);
    }

    .movie-row::-webkit-scrollbar {
      display: none;
    }

    #details {
      padding: 40px;
      display: none;
    }

    #details img {
      width: 300px;
      border-radius: 10px;
    }

    .back-btn {
      background: red;
      border: none;
      padding: 8px 15px;
      color: white;
      border-radius: 5px;
      cursor: pointer;
      margin-bottom: 20px;
    }
  </style>
</head>
<body>

<header>
  <h1>NETFLIX</h1>
  <div class="search-box">
    <input type="text" id="searchInput" placeholder="Search movies...">
    <button onclick="searchMovie()">Search</button>
  </div>
</header>

<div class="hero" id="hero">
  <h2>ðŸ”¥ Trending Now</h2>
</div>

<h3>Trending Movies</h3>
<div class="movie-row" id="movies"></div>

<div id="details"></div>

<script>
  const movieContainer = document.getElementById("movies");
  const hero = document.getElementById("hero");
  const detailsContainer = document.getElementById("details");

  async function getTrending() {
    const res = await fetch("/api/trending");
    const data = await res.json();
    displayMovies(data.results);

    // Set first movie as hero background
    if (data.results.length > 0) {
      hero.style.backgroundImage =
        "url(https://image.tmdb.org/t/p/original" +
        data.results[0].backdrop_path + ")";
    }
  }

  async function searchMovie() {
    const query = document.getElementById("searchInput").value;
    if (!query) return;

    const res = await fetch(`/api/search?query=${query}`);
    const data = await res.json();
    displayMovies(data.results);
  }

  function displayMovies(movies) {
    movieContainer.innerHTML = "";
    detailsContainer.style.display = "none";

    movies.forEach(movie => {
      if (movie.poster_path) {
        const img = document.createElement("img");
        img.src = "https://image.tmdb.org/t/p/w500" + movie.poster_path;
        img.onclick = () => showDetails(movie);
        movieContainer.appendChild(img);
      }
    });
  }

  function showDetails(movie) {
    detailsContainer.style.display = "block";
    detailsContainer.innerHTML = `
      <button class="back-btn" onclick="goBack()">â¬… Back</button>
      <h2>${movie.title}</h2>
      <img src="https://image.tmdb.org/t/p/w500${movie.poster_path}">
      <p><strong>Release:</strong> ${movie.release_date}</p>
      <p><strong>Rating:</strong> ${movie.vote_average}</p>
      <p>${movie.overview}</p>
    `;
    window.scrollTo(0, document.body.scrollHeight);
  }

  function goBack() {
    detailsContainer.style.display = "none";
  }

  getTrending();
</script>

</body>
</html>
