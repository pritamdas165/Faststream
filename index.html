 <!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Netflix Style Movie App</title>
<style>
body{
  margin:0;
  background:#141414;
  font-family:Arial;
  color:white;
}
header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:15px 40px;
  background:black;
  position:sticky;
  top:0;
  z-index:100;
}
header h1{
  color:red;
  margin:0;
}
input{
  padding:8px;
  border-radius:4px;
  border:none;
}
button{
  padding:8px 12px;
  border:none;
  border-radius:4px;
  cursor:pointer;
  margin-left:5px;
}
.hero{
  height:60vh;
  background-size:cover;
  background-position:center;
  display:flex;
  align-items:flex-end;
  padding:40px;
}
.hero h2{
  font-size:40px;
}
h3{
  margin-left:40px;
}
.movie-row{
  display:flex;
  overflow-x:auto;
  padding:20px 40px;
  gap:15px;
}
.movie-row img{
  width:150px;
  border-radius:6px;
  transition:0.3s;
  cursor:pointer;
}
.movie-row img:hover{
  transform:scale(1.1);
}
#details{
  padding:40px;
  display:none;
}
#details img{
  width:300px;
  border-radius:10px;
}
.back-btn{
  background:red;
  color:white;
}
.fav-btn{
  background:gold;
}
.trailer-btn{
  background:#e50914;
  color:white;
}
.rating-high{color:#00ff00;}
.rating-mid{color:yellow;}
.rating-low{color:red;}

@media(max-width:600px){
  .movie-row img{width:110px;}
  .hero{height:40vh;}
  .hero h2{font-size:24px;}
}
</style>
</head>

<body>

<header>
  <h1>NETFLIX</h1>
  <div>
    <input type="text" id="searchInput" placeholder="Search movie...">
    <button onclick="searchMovie()">Search</button>
    <button onclick="showFavourites()">‚ù§Ô∏è Favourites</button>
  </div>
</header>

<div class="hero" id="hero">
  <h2>üî• Trending Now</h2>
</div>

<h3>Trending Movies</h3>
<div class="movie-row" id="movies"></div>

<div id="details"></div>

<script>
const movieContainer=document.getElementById("movies");
const hero=document.getElementById("hero");
const details=document.getElementById("details");

let favourites=[];

async function getTrending(){
 const res=await fetch("/api/trending");
 const data=await res.json();
 displayMovies(data.results);

 if(data.results[0]){
   hero.style.backgroundImage=
   "url(https://image.tmdb.org/t/p/original"+data.results[0].backdrop_path+")";
 }
}

async function searchMovie(){
 const q=document.getElementById("searchInput").value;
 if(!q)return;
 const res=await fetch(`/api/search?query=${q}`);
 const data=await res.json();
 displayMovies(data.results);
}

function displayMovies(movies){
 movieContainer.innerHTML="";
 details.style.display="none";
 movies.forEach(movie=>{
   if(movie.poster_path){
     const img=document.createElement("img");
     img.src="https://image.tmdb.org/t/p/w500"+movie.poster_path;
     img.onclick=()=>showDetails(movie);
     movieContainer.appendChild(img);
   }
 });
}

function showDetails(movie){
 let ratingClass="rating-low";
 if(movie.vote_average>=7) ratingClass="rating-high";
 else if(movie.vote_average>=5) ratingClass="rating-mid";

 details.style.display="block";
 details.innerHTML=`
   <button class="back-btn" onclick="goBack()">‚¨Ö Back</button>
   <h2>${movie.title}</h2>
   <img src="https://image.tmdb.org/t/p/w500${movie.poster_path}">
   <p><strong>Release:</strong> ${movie.release_date}</p>
   <p class="${ratingClass}"><strong>Rating:</strong> ${movie.vote_average}</p>
   <p>${movie.overview}</p>
   <button class="fav-btn" onclick='addFavourite(${JSON.stringify(movie)})'>‚ù§Ô∏è Add to Favourite</button>
   <button class="trailer-btn" onclick="searchTrailer('${movie.title}')">üé¨ Watch Trailer</button>
 `;
 window.scrollTo(0,document.body.scrollHeight);
}

function goBack(){
 details.style.display="none";
}

function addFavourite(movie){
 favourites.push(movie);
 alert("Added to favourites ‚ù§Ô∏è");
}

function showFavourites(){
 if(favourites.length===0){
   alert("No favourites added yet");
   return;
 }
 displayMovies(favourites);
}

function searchTrailer(title){
 window.open("https://www.youtube.com/results?search_query="+title+" trailer");
}

getTrending();
</script>

</body>
</html>
