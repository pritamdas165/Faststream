 <!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>MovieFlix Final</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Arial}
body{background:#000;color:#fff;padding-bottom:70px}

/* HEADER */
header{
  position:sticky;top:0;z-index:10;
  background:#111;padding:12px 15px;
  display:flex;gap:8px;align-items:center
}
.logo{color:#e50914;font-size:22px;font-weight:bold}
#search,#category{
  padding:6px;border-radius:4px;border:none
}

/* SECTION */
.section{padding:15px}

/* GRID */
.grid{
  display:flex;gap:10px;overflow-x:auto
}
.grid::-webkit-scrollbar{display:none}

/* CARD */
.card{
  min-width:150px;background:#111;border-radius:6px;
  overflow:hidden;position:relative
}
.card img{width:100%;height:160px;object-fit:cover}
.info{padding:6px;font-size:12px}
button{width:100%;margin-top:4px;padding:6px;border:none;border-radius:4px;cursor:pointer}
.watch{background:#e50914;color:#fff}
.download{background:#333;color:#fff}

/* MODAL */
#modal{
  display:none;position:fixed;inset:0;
  background:rgba(0,0,0,.9);
  justify-content:center;align-items:center;z-index:999
}
#modalContent{
  width:92%;max-width:420px;
  background:#111;border-radius:8px;padding:15px
}
#modalContent img{width:100%;border-radius:6px}
#modalContent p{font-size:13px;color:#ccc}
iframe{width:100%;height:200px;margin-top:10px;border-radius:6px}

/* AD */
#adBox{
  display:none;position:fixed;inset:0;
  background:rgba(0,0,0,.95);
  justify-content:center;align-items:center;
  flex-direction:column;z-index:1000
}

/* ADMIN */
#admin{
  display:none;padding:15px;background:#111
}
#admin input, #admin select{
  width:100%;margin:5px 0;padding:6px
}
#admin button{background:#e50914;color:#fff;margin-top:6px}

/* BOTTOM NAV */
.bottom-nav{
  position:fixed;bottom:0;width:100%;
  background:#111;display:flex;
  justify-content:space-around;padding:8px 0
}
.bottom-nav button{background:none;color:#aaa}
.bottom-nav .active{color:#e50914}
</style>
</head>

<body>

<header>
  <div class="logo">MovieFlix</div>
  <input id="search" placeholder="Search">
  <select id="category">
    <option value="all">All</option>
    <option>Action</option>
    <option>Romance</option>
    <option>Thriller</option>
  </select>
</header>

<div class="section">
  <div class="grid" id="movieGrid"></div>
</div>

<!-- MODAL -->
<div id="modal" onclick="closeModal()">
  <div id="modalContent" onclick="event.stopPropagation()"></div>
</div>

<!-- AD -->
<div id="adBox">
  <div>Advertisement</div>
  <div id="adTimer">Wait 5s</div>
</div>

<!-- ADMIN PANEL -->
<div id="admin">
  <h3>Admin Panel</h3>
  <input id="aTitle" placeholder="Title">
  <input id="aPoster" placeholder="Poster URL">
  <input id="aTrailer" placeholder="Trailer URL">
  <input id="aDesc" placeholder="Description">
  <select id="aCat">
    <option>Action</option>
    <option>Romance</option>
    <option>Thriller</option>
  </select>
  <button onclick="addMovie()">Save Movie</button>
</div>

<div class="bottom-nav">
  <button class="active" onclick="showHome()">Home</button>
  <button onclick="showAdmin()">Admin</button>
</div>

<script>
/* ===== ELEMENTS ===== */
const grid=document.getElementById("movieGrid");
const modal=document.getElementById("modal");
const modalContent=document.getElementById("modalContent");
const adBox=document.getElementById("adBox");
const adTimer=document.getElementById("adTimer");
const search=document.getElementById("search");
const category=document.getElementById("category");

/* ===== ADS ===== */
const POP_AD="https://example.com";
const AD_DELAY=5;
let adRunning=false;

/* ===== DATA ===== */
let movies=JSON.parse(localStorage.getItem("movies"))||[
{
 title:"Dhoom 3",
 poster:"https://upload.wikimedia.org/wikipedia/en/4/4f/Dhoom_3_Film_Poster.jpg",
 trailer:"https://www.youtube.com/embed/yeF_b8EQcK0",
 desc:"Action blockbuster",
 cat:"Action"
}
];

function save(){localStorage.setItem("movies",JSON.stringify(movies))}

/* ===== RENDER ===== */
function render(list){
 grid.innerHTML="";
 list.forEach((m,i)=>{
  grid.innerHTML+=`
  <div class="card">
    <img src="${m.poster}" onclick="openModal(${i})">
    <div class="info">
      <b>${m.title}</b>
      <button class="watch" onclick="runAds('${m.trailer}')">Watch</button>
      <button class="download" onclick="runAds('${m.trailer}')">Download</button>
    </div>
  </div>`;
 });
}

/* ===== MODAL ===== */
function openModal(i){
 modal.style.display="flex";
 modalContent.innerHTML=`
 <img src="${movies[i].poster}">
 <h3>${movies[i].title}</h3>
 <p>${movies[i].desc}</p>
 <iframe src="${movies[i].trailer}" allow="autoplay"></iframe>
 `;
}
function closeModal(){modal.style.display="none"}

/* ===== ADS ONLY ON CLICK ===== */
function runAds(url){
 if(adRunning) return;
 adRunning=true;
 window.open(POP_AD,"_blank");
 adBox.style.display="flex";
 let t=AD_DELAY;
 adTimer.innerText="Wait "+t+"s";
 let timer=setInterval(()=>{
  t--;
  adTimer.innerText="Wait "+t+"s";
  if(t<=0){
   clearInterval(timer);
   adBox.style.display="none";
   adRunning=false;
   window.location.href=url;
  }
 },1000);
}

/* ===== SEARCH + CATEGORY ===== */
function filter(){
 let q=search.value.toLowerCase();
 let c=category.value;
 render(movies.filter(m=>
  m.title.toLowerCase().includes(q) &&
  (c=="all"||m.cat==c)
 ));
}
search.oninput=filter;
category.onchange=filter;

/* ===== ADMIN ===== */
function showAdmin(){
 document.querySelector(".section").style.display="none";
 document.getElementById("admin").style.display="block";
}
function showHome(){
 document.querySelector(".section").style.display="block";
 document.getElementById("admin").style.display="none";
 render(movies);
}
function addMovie(){
 movies.push({
  title:aTitle.value,
  poster:aPoster.value,
  trailer:aTrailer.value,
  desc:aDesc.value,
  cat:aCat.value
 });
 save();showHome();
}

/* INIT */
render(movies);
</script>

</body>
</html>
