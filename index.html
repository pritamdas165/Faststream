 <!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>MovieFlix TMDB</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Arial}
body{background:#000;color:#fff}
header{
  background:#111;
  padding:12px 15px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  position:sticky;
  top:0;
  z-index:10;
}
.logo{color:#e50914;font-size:22px;font-weight:bold}
#search{padding:6px;border-radius:4px;border:none}

.section{padding:15px}
.section h2{margin-bottom:10px}

.grid{
  display:flex;
  gap:10px;
  overflow-x:auto;
}
.grid::-webkit-scrollbar{display:none}

.card{
  min-width:150px;
  background:#111;
  border-radius:6px;
  overflow:hidden;
}
.card img{
  width:100%;
  height:220px;
  object-fit:cover;
}
.info{padding:6px;font-size:12px}
button{
  width:100%;
  margin-top:5px;
  padding:6px;
  border:none;
  border-radius:4px;
  font-size:12px;
  cursor:pointer;
}
.watch{background:#e50914;color:#fff}

/* MODAL */
#modal{
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.9);
  z-index:999;
  justify-content:center;
  align-items:center;
}
#modalContent{
  width:92%;
  max-width:420px;
  background:#111;
  border-radius:8px;
  padding:15px;
}
#modalContent img{
  width:100%;
  border-radius:6px;
}
#modalContent p{
  font-size:13px;
  color:#ccc;
  margin-top:8px;
}
</style>
</head>

<body>

<header>
  <div class="logo">MovieFlix</div>
  <input id="search" placeholder="Search movie">
</header>

<div class="section">
  <h2>üî• Trending</h2>
  <div class="grid" id="trendingGrid"></div>
</div>

<div class="section">
  <h2>‚≠ê Popular</h2>
  <div class="grid" id="popularGrid"></div>
</div>

<!-- MODAL -->
<div id="modal" onclick="closeModal()">
  <div id="modalContent" onclick="event.stopPropagation()"></div>
</div>

<script>
/* ===== CONFIG ===== */
const TMDB_KEY = "cc9374659de08b939499a50af4715216"; // v3 key
const IMG = "https://image.tmdb.org/t/p/w500";

/* ===== ELEMENTS ===== */
const trendingGrid = document.getElementById("trendingGrid");
const popularGrid  = document.getElementById("popularGrid");
const modal = document.getElementById("modal");
const modalContent = document.getElementById("modalContent");
const search = document.getElementById("search");

/* ===== FETCH ===== */
async function getMovies(url){
  const res = await fetch(url);
  const data = await res.json();
  return data.results || [];
}

async function load(){
  const trending = await getMovies(
    `https://api.themoviedb.org/3/trending/movie/week?api_key=${TMDB_KEY}`
  );
  const popular = await getMovies(
    `https://api.themoviedb.org/3/movie/popular?api_key=${TMDB_KEY}`
  );

  render(trendingGrid, trending);
  render(popularGrid, popular);

  window.allMovies = [...trending, ...popular];
}

/* ===== RENDER ===== */
function render(grid, list){
  grid.innerHTML = "";
  list.forEach(m=>{
    if(!m.poster_path) return;
    grid.innerHTML += `
      <div class="card">
        <img src="${IMG + m.poster_path}" onclick='openModal(${JSON.stringify(m)})'>
        <div class="info">
          <b>${m.title}</b>
          <button class="watch">Watch</button>
        </div>
      </div>
    `;
  });
}

/* ===== MODAL ===== */
function openModal(m){
  modal.style.display="flex";
  modalContent.innerHTML=`
    <img src="${IMG + m.poster_path}">
    <h3>${m.title}</h3>
    <p>${m.overview || "No description available."}</p>
  `;
}
function closeModal(){
  modal.style.display="none";
  modalContent.innerHTML="";
}

/* ===== SEARCH ===== */
search.oninput = ()=>{
  const q = search.value.toLowerCase();
  if(!q){
    load();
    return;
  }
  const filtered = window.allMovies.filter(m =>
    m.title.toLowerCase().includes(q)
  );
  trendingGrid.innerHTML="";
  popularGrid.innerHTML="";
  render(trendingGrid, filtered);
};

/* INIT */
load();
</script>

</body>
</html>
