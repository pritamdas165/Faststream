<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Nova Stream</title>

<style>
:root{
  --glass:rgba(255,255,255,.08);
  --blur:blur(14px);
  --accent:#e50914;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui;
  background:#0b0b0f;
  color:#fff;
  overflow-x:hidden;
}
header{
  position:fixed;
  top:0;left:0;right:0;
  padding:14px;
  background:linear-gradient(#000,transparent);
  z-index:10;
  font-weight:bold;
}

/* PAGE TRANSITION */
.page{
  transition:opacity .4s, transform .4s;
}
.hide{
  opacity:0;
  transform:translateX(40px);
  pointer-events:none;
}
.show{
  opacity:1;
  transform:translateX(0);
}

/* HERO */
.hero{
  margin-top:50px;
  height:60vh;
  overflow:hidden;
  position:relative;
}
.hero-slider{
  display:flex;
  height:100%;
  transition:transform .7s ease;
}
.hero-slide{min-width:100%; position:relative}
.hero-slide img{width:100%; height:100%; object-fit:cover}
.hero-slide::after{
  content:"";
  position:absolute;
  bottom:0;
  width:100%;
  height:60%;
  background:linear-gradient(to top,rgba(0,0,0,.9),transparent);
}
.hero-content{
  position:absolute;
  bottom:30px;
  left:16px;
}
.hero-content h1{margin:0 0 8px}
.btn{
  background:var(--accent);
  border:none;
  border-radius:999px;
  padding:8px 16px;
  color:white;
  cursor:pointer;
}
.rating{
  position:absolute;
  top:15px;
  right:15px;
  background:var(--glass);
  backdrop-filter:var(--blur);
  padding:6px 10px;
  border-radius:20px;
}

/* ROW + ARROWS */
.section{margin-top:10px}
.section h3{margin:10px}
.row-wrap{position:relative}
.row{
  display:flex;
  gap:12px;
  overflow-x:auto;
  scroll-snap-type:x mandatory;
  padding:10px;
}
.row::-webkit-scrollbar{display:none}
.card{
  min-width:140px;
  scroll-snap-align:start;
  border-radius:14px;
  overflow:hidden;
  background:var(--glass);
  backdrop-filter:var(--blur);
  cursor:pointer;
}
.card img{width:100%; height:200px; object-fit:cover}

.arrow{
  position:absolute;
  top:40%;
  background:rgba(0,0,0,.6);
  border:none;
  color:white;
  font-size:22px;
  padding:8px;
  cursor:pointer;
  z-index:5;
}
.arrow.left{left:0}
.arrow.right{right:0}

/* GRID */
.grid{
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:12px;
  padding:12px 12px 80px;
}
.tile{
  position:relative;
  border-radius:14px;
  overflow:hidden;
  cursor:pointer;
}
.tile img{width:100%; height:220px; object-fit:cover}
.overlay{
  position:absolute;
  bottom:0;
  width:100%;
  padding:8px;
  background:linear-gradient(to top,rgba(0,0,0,.9),transparent);
}

/* DETAILS */
#details{padding:14px}
.poster{
  width:100%;
  max-height:420px;
  object-fit:cover;
  border-radius:16px;
}
.glass{
  background:var(--glass);
  backdrop-filter:var(--blur);
  padding:14px;
  border-radius:16px;
  margin-top:12px;
}

/* TRAILER OVERLAY */
#trailerOverlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.95);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:999;
}
#trailerOverlay iframe{
  width:90%;
  height:50%;
}
.close{
  position:absolute;
  top:15px;
  right:15px;
  font-size:20px;
  cursor:pointer;
}
</style>
</head>

<body>

<header>Nova Stream</header>

<div id="home" class="page show">
  <div class="hero">
    <div id="heroSlider" class="hero-slider"></div>
    <div class="hero-content">
      <h1 id="heroTitle"></h1>
      <button class="btn" onclick="openTrailer()">â–¶ Trailer</button>
    </div>
    <div id="heroRating" class="rating"></div>
  </div>

  <div class="section">
    <h3>ðŸ”¥ Trending Now</h3>
    <div class="row-wrap">
      <button class="arrow left" onclick="scrollRow('trending',-1)">â€¹</button>
      <div id="trending" class="row"></div>
      <button class="arrow right" onclick="scrollRow('trending',1)">â€º</button>
    </div>
  </div>

  <div class="section">
    <h3>ðŸ†• Latest Releases</h3>
    <div class="row-wrap">
      <button class="arrow left" onclick="scrollRow('latest',-1)">â€¹</button>
      <div id="latest" class="row"></div>
      <button class="arrow right" onclick="scrollRow('latest',1)">â€º</button>
    </div>
  </div>

  <div id="grid" class="grid"></div>
</div>

<div id="details" class="page hide"></div>

<div id="trailerOverlay">
  <div class="close" onclick="closeTrailer()">âœ–</div>
  <iframe id="trailerFrame" allowfullscreen></iframe>
</div>

<script>
const API="66cb706";
let currentTitle="";

async function load(){
  const r=await fetch(`https://www.omdbapi.com/?apikey=${API}&s=avengers`);
  const d=await r.json();
  buildHero(d.Search.slice(0,5));
  buildRow("trending",d.Search.slice(0,10));
  buildRow("latest",d.Search.slice(5,15));
  buildGrid(d.Search);
}

function buildHero(list){
  const h=document.getElementById("heroSlider");
  h.innerHTML="";
  list.forEach(async m=>{
    const r=await fetch(`https://www.omdbapi.com/?apikey=${API}&i=${m.imdbID}`);
    const f=await r.json();
    const s=document.createElement("div");
    s.className="hero-slide";
    s.innerHTML=`<img src="${f.Poster}">`;
    h.appendChild(s);
    currentTitle=f.Title;
    heroTitle.innerText=f.Title;
    heroRating.innerText="â­ "+f.imdbRating;
  });
}

function buildRow(id,list){
  const r=document.getElementById(id);
  r.innerHTML="";
  list.forEach(m=>{
    if(m.Poster==="N/A")return;
    const c=document.createElement("div");
    c.className="card";
    c.innerHTML=`<img src="${m.Poster}">`;
    r.appendChild(c);
  });
}

function buildGrid(list){
  const g=document.getElementById("grid");
  g.innerHTML="";
  list.forEach(m=>{
    if(m.Poster==="N/A")return;
    const t=document.createElement("div");
    t.className="tile";
    t.innerHTML=`<img src="${m.Poster}"><div class="overlay">${m.Title}</div>`;
    g.appendChild(t);
  });
}

function scrollRow(id,dir){
  const row=document.getElementById(id);
  row.scrollBy({left:dir*200,behavior:"smooth"});
}

function openTrailer(){
  trailerOverlay.style.display="flex";
  trailerFrame.src=`https://www.youtube.com/embed?listType=search&list=${encodeURIComponent(currentTitle+" trailer")}&autoplay=1`;
}
function closeTrailer(){
  trailerOverlay.style.display="none";
  trailerFrame.src="";
}

load();
</script>

</body>
</html>
