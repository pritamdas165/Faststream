<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>FastStream</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Arial,sans-serif}
body{background:#0f172a;color:#fff}

/* ===== NAVBAR ===== */
.navbar{
 position:fixed;top:0;left:0;width:100%;
 padding:12px 18px;display:flex;gap:12px;align-items:center;
 background:rgba(15,23,42,.85);backdrop-filter:blur(10px);
 z-index:100
}
.logo{
 font-size:20px;font-weight:700;
 background:linear-gradient(90deg,#22c55e,#3b82f6);
 -webkit-background-clip:text;-webkit-text-fill-color:transparent
}
.spacer{flex:1}
.nav-btn{
 background:none;border:none;color:#cbd5e1;cursor:pointer
}
.nav-btn:hover{color:#22c55e}

/* ===== HOME ===== */
.home{margin-top:64px;padding:18px}
.grid{
 display:grid;grid-template-columns:repeat(6,1fr);gap:14px
}
.card{
 background:#111827;border-radius:12px;overflow:hidden;position:relative
}
.card img{width:100%;display:block}
.badge{
 position:absolute;top:8px;left:8px;
 background:#22c55e;color:#022c22;font-size:11px;
 padding:4px 8px;border-radius:999px;font-weight:700
}
.card-body{padding:10px}
.title{font-size:13px;font-weight:700;margin-bottom:8px;line-height:1.3}
.actions{display:flex;gap:8px}
.actions button{
 flex:1;padding:8px;border:none;border-radius:8px;
 font-weight:700;cursor:pointer
}
.watch{background:#22c55e;color:#022c22}
.down{background:#3b82f6;color:#02152a}

/* ===== DETAILS ===== */
.details{display:none;margin-top:64px}
.details-hero{
 position:relative;height:55vh;overflow:hidden
}
.details-bg{
 position:absolute;inset:0;background-size:cover;background-position:center
}
.details-overlay{
 position:absolute;inset:0;
 background:linear-gradient(to top,rgba(0,0,0,.9),transparent)
}
.details-content{
 position:relative;z-index:2;display:flex;gap:18px;
 padding:18px;align-items:flex-end
}
.details-poster{
 width:160px;border-radius:12px;overflow:hidden;flex-shrink:0
}
.details-poster img{width:100%}
.details-info{max-width:720px}
.details-info h1{font-size:28px;margin-bottom:8px}
.meta{color:#cbd5e1;font-size:13px;margin-bottom:10px}
.overview{color:#e5e7eb;font-size:14px;line-height:1.5;margin-bottom:14px}
.details-actions{display:flex;gap:10px;flex-wrap:wrap}
.details-actions button{
 padding:12px 18px;border:none;border-radius:10px;
 font-weight:800;cursor:pointer
}
.btn-watch{background:#22c55e;color:#022c22}
.btn-down{background:#3b82f6;color:#02152a}
.btn-back{background:#1f2937;color:#e5e7eb}

/* ===== RESPONSIVE ===== */
@media(max-width:1200px){.grid{grid-template-columns:repeat(5,1fr)}}
@media(max-width:992px){.grid{grid-template-columns:repeat(4,1fr)}}
@media(max-width:768px){
 .grid{grid-template-columns:repeat(2,1fr)}
 .details-content{flex-direction:column;align-items:flex-start}
 .details-hero{height:60vh}
}
</style>
</head>

<body>

<!-- NAVBAR -->
<div class="navbar">
 <div class="logo">FASTSTREAM</div>
 <div class="spacer"></div>
 <button class="nav-btn" onclick="goHome()">Home</button>
</div>

<!-- HOME -->
<div class="home" id="home">
 <div class="grid" id="grid"></div>
</div>

<!-- DETAILS -->
<div class="details" id="details">
 <div class="details-hero">
  <div class="details-bg" id="dBg"></div>
  <div class="details-overlay"></div>
  <div class="details-content">
   <div class="details-poster">
    <img id="dPoster" />
   </div>
   <div class="details-info">
    <h1 id="dTitle"></h1>
    <div class="meta" id="dMeta"></div>
    <div class="overview" id="dOverview"></div>
    <div class="details-actions">
     <button class="btn-watch" onclick="watchNow()">▶ Watch</button>
     <button class="btn-down" onclick="downloadNow()">⬇ Download</button>
     <button class="btn-back" onclick="goHome()">← Back</button>
    </div>
   </div>
  </div>
 </div>
</div>

<script>
let currentMovie=null;

/* LOAD HOME */
async function loadHome(){
 const r=await fetch("/api/trending");
 const d=await r.json();
 renderGrid(d.results);
}
function renderGrid(movies){
 grid.innerHTML="";
 movies.forEach(m=>{
  grid.innerHTML+=`
   <div class="card">
    <span class="badge">HD</span>
    <img src="https://image.tmdb.org/t/p/w500${m.poster_path}">
    <div class="card-body">
     <div class="title">${m.title}</div>
     <div class="actions">
      <button class="watch" onclick='openDetails(${JSON.stringify(m)})'>Watch</button>
      <button class="down" onclick='openDetails(${JSON.stringify(m)})'>Download</button>
     </div>
    </div>
   </div>`;
 });
}

/* DETAILS */
function openDetails(m){
 currentMovie=m;
 home.style.display="none";
 details.style.display="block";
 dBg.style.backgroundImage=`url(https://image.tmdb.org/t/p/original${m.backdrop_path})`;
 dPoster.src=`https://image.tmdb.org/t/p/w500${m.poster_path}`;
 dTitle.innerText=m.title;
 dMeta.innerText=`⭐ ${m.vote_average} • ${m.release_date || ""}`;
 dOverview.innerText=m.overview || "No description available.";
 window.scrollTo(0,0);
}
function goHome(){
 details.style.display="none";
 home.style.display="block";
}

/* PLACEHOLDERS (ads next step) */
function watchNow(){
 alert("Watch flow (ads will trigger next step)");
}
function downloadNow(){
 alert("Download flow (ads will trigger next step)");
}

loadHome();
</script>

</body>
</html>
