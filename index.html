 <!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>MovieFlix TMDB</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Arial}
body{background:#000;color:#fff;padding-bottom:70px}
header{background:#111;padding:12px;display:flex;justify-content:space-between;align-items:center}
.logo{color:#e50914;font-size:22px;font-weight:bold}
#search{padding:6px;border-radius:4px;border:none}

.section{padding:15px}
.grid{display:flex;gap:10px;overflow-x:auto}
.grid::-webkit-scrollbar{display:none}

.card{min-width:150px;background:#111;border-radius:6px;overflow:hidden}
.card img{width:100%;height:200px;object-fit:cover}
.info{padding:6px;font-size:12px}
button{width:100%;margin-top:5px;padding:6px;border:none;border-radius:4px;font-size:12px}
.watch{background:#e50914;color:#fff}
.download{background:#333;color:#fff}

#modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,.92);z-index:999;justify-content:center;align-items:center}
#modalContent{width:92%;max-width:420px;background:#111;border-radius:8px;padding:15px}
#modalContent img{width:100%;border-radius:6px}
#modalContent p{font-size:13px;color:#ccc;margin-top:8px}
#modalContent iframe{width:100%;height:200px;margin-top:10px;border-radius:6px}

#adBox{display:none;position:fixed;inset:0;background:rgba(0,0,0,.95);z-index:1000;justify-content:center;align-items:center;flex-direction:column}
#adTimer{color:#e50914;margin-top:10px}
</style>
</head>

<body>

<header>
  <div class="logo">MovieFlix</div>
  <input id="search" placeholder="Search movie">
</header>

<div class="section">
  <div class="grid" id="movieGrid"></div>
</div>

<!-- MODAL -->
<div id="modal" onclick="closeModal()">
  <div id="modalContent" onclick="event.stopPropagation()"></div>
</div>

<!-- ADS -->
<div id="adBox">
  <div>Advertisement</div>
  <div id="adTimer">Wait 5s</div>
</div>

<script>
/* ================= CONFIG ================= */
const TMDB_KEY = "cc9374659de08b939499a50af4715216";
const IMG_BASE = "https://image.tmdb.org/t/p/w500";
const POP_AD = "https://example.com";
const AD_DELAY = 5;

/* ================= ELEMENTS ================= */
const movieGrid = document.getElementById("movieGrid");
const modal = document.getElementById("modal");
const modalContent = document.getElementById("modalContent");
const adBox = document.getElementById("adBox");
const adTimer = document.getElementById("adTimer");
const search = document.getElementById("search");

/* ================= ADS ================= */
let adRunning=false;
function runAds(url){
 if(adRunning) return;
 adRunning=true;
 window.open(POP_AD,"_blank");
 adBox.style.display="flex";
 let t=AD_DELAY;
 adTimer.innerText="Wait "+t+"s";
 let timer=setInterval(()=>{
  t--;
  adTimer.innerText="Wait "+t+"s";
  if(t<=0){
   clearInterval(timer);
   adBox.style.display="none";
   adRunning=false;
   window.location.href=url;
  }
 },1000);
}

/* ================= FETCH MOVIES ================= */
let movies=[];
fetch(`https://api.themoviedb.org/3/movie/popular?api_key=${TMDB_KEY}`)
.then(res=>res.json())
.then(data=>{
 movies=data.results;
 render(movies);
});

/* ================= RENDER ================= */
function render(list){
 movieGrid.innerHTML="";
 list.forEach((m,i)=>{
  if(!m.poster_path) return;
  movieGrid.innerHTML+=`
   <div class="card">
     <img src="${IMG_BASE + m.poster_path}" onclick="openModal(${i})">
     <div class="info">
       <b>${m.title}</b>
       <button class="watch" onclick="runAds('https://youtube.com')">Watch</button>
       <button class="download" onclick="runAds('#')">Download</button>
     </div>
   </div>`;
 });
}

/* ================= MODAL ================= */
function openModal(i){
 modal.style.display="flex";
 modalContent.innerHTML=`
  <img src="${IMG_BASE + movies[i].poster_path}">
  <h3>${movies[i].title}</h3>
  <p>${movies[i].overview || "No description"}</p>
 `;
}
function closeModal(){
 modal.style.display="none";
 modalContent.innerHTML="";
}

/* ================= SEARCH ================= */
search.oninput=()=>{
 let q=search.value.toLowerCase();
 render(movies.filter(m=>m.title.toLowerCase().includes(q)));
};
</script>

</body>
</html>
