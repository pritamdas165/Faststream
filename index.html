<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>FastStream</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:Arial, sans-serif;
}

body{
  background:#141414;
  color:#fff;
}

/* ========== NAVBAR ========== */
.navbar{
  position:fixed;
  top:0;
  left:0;
  width:100%;
  padding:14px 24px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  background:rgba(20,20,20,0.65);
  backdrop-filter:blur(10px);
  z-index:100;
  transition:0.3s ease;
}

.navbar.scrolled{
  background:rgba(10,10,10,0.95);
  box-shadow:0 8px 25px rgba(0,0,0,0.6);
}

.logo{
  font-size:20px;
  font-weight:500;
  letter-spacing:1px;
  background:linear-gradient(90deg,#e50914,#ff3c3c);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}

.nav-links{
  display:flex;
  gap:18px;
}

.nav-links button{
  background:none;
  border:none;
  color:#fff;
  font-size:13px;
  cursor:pointer;
  transition:0.3s;
}

.nav-links button:hover{
  color:#e50914;
}

/* ========== HERO ========== */
.hero{
  height:90vh;
  position:relative;
  display:flex;
  align-items:flex-end;
  padding:60px;
  margin-top:60px;
  overflow:hidden;
}

.hero-bg{
  position:absolute;
  inset:0;
  background-size:cover;
  background-position:center;
  animation:zoom 20s ease-in-out infinite alternate;
}

@keyframes zoom{
  from{transform:scale(1);}
  to{transform:scale(1.08);}
}

.hero-overlay{
  position:absolute;
  inset:0;
  background:linear-gradient(
    to top,
    rgba(0,0,0,0.9),
    rgba(0,0,0,0.5),
    rgba(0,0,0,0.15),
    transparent
  );
  z-index:1;
}

.hero-content{
  position:relative;
  z-index:2;
  max-width:520px;
  animation:fadeUp 1.2s ease forwards;
}

@keyframes fadeUp{
  from{opacity:0;transform:translateY(30px);}
  to{opacity:1;transform:translateY(0);}
}

.hero h1{
  font-size:52px;
  margin-bottom:14px;
}

.hero p{
  font-size:15px;
  line-height:1.6;
  color:#ddd;
  margin-bottom:22px;
}

.hero-actions{
  display:flex;
  gap:12px;
}

.btn-primary{
  padding:12px 26px;
  background:#e50914;
  border:none;
  color:#fff;
  font-weight:600;
  border-radius:4px;
}

.btn-secondary{
  padding:12px 22px;
  background:rgba(255,255,255,0.15);
  border:none;
  color:#fff;
  border-radius:4px;
}

/* ========== SECTION ========== */
.section{
  padding:30px 40px;
}

.row{
  display:flex;
  gap:16px;
  overflow-x:auto;
}

.row::-webkit-scrollbar{
  display:none;
}

.poster{
  min-width:160px;
  position:relative;
  cursor:pointer;
  transition:0.35s;
}

.poster img{
  width:100%;
  border-radius:8px;
}

.poster:hover{
  transform:scale(1.12);
  z-index:5;
}

.poster::after{
  content:"";
  position:absolute;
  inset:0;
  border-radius:8px;
  background:linear-gradient(
    to top,
    rgba(0,0,0,0.9),
    rgba(0,0,0,0.4),
    transparent
  );
  opacity:0;
  transition:0.35s;
}

.poster:hover::after{
  opacity:1;
}

.poster-info{
  position:absolute;
  bottom:10px;
  left:10px;
  right:10px;
  opacity:0;
  transition:0.35s;
}

.poster:hover .poster-info{
  opacity:1;
}

.poster-title{
  font-size:13px;
  font-weight:600;
}

.poster-rating{
  font-size:12px;
  color:#f5c518;
}

/* ========== MOBILE ========== */
@media(max-width:768px){
  .hero{
    height:65vh;
    padding:30px;
  }
  .hero h1{
    font-size:28px;
  }
  .poster{
    min-width:120px;
  }
}
</style>
</head>

<body>

<div class="navbar">
  <div class="logo">FASTSTREAM</div>
  <div class="nav-links">
    <button onclick="loadTrending()">Trending</button>
    <button onclick="loadTopRated()">Top Rated</button>
    <button onclick="loadUpcoming()">Upcoming</button>
  </div>
</div>

<div class="hero">
  <div class="hero-bg" id="hero-bg"></div>
  <div class="hero-overlay"></div>
  <div class="hero-content">
    <h1 id="hero-title"></h1>
    <p id="hero-overview"></p>
    <div class="hero-actions">
      <button class="btn-primary">▶ Play</button>
      <button class="btn-secondary">ⓘ Info</button>
    </div>
  </div>
</div>

<div class="section">
  <h2 id="section-title">Trending Movies</h2>
  <div class="row" id="movies"></div>
</div>

<script>
const navbar = document.querySelector(".navbar");
window.addEventListener("scroll",()=>{
  navbar.classList.toggle("scrolled",window.scrollY>40);
});

let heroMovies=[],heroIndex=0;
const moviesDiv=document.getElementById("movies");
const sectionTitle=document.getElementById("section-title");

async function loadHero(){
  const res=await fetch("/api/trending");
  const data=await res.json();
  heroMovies=data.results.slice(0,5);
  updateHero();
  setInterval(nextHero,5000);
}

function updateHero(){
  const m=heroMovies[heroIndex];
  document.getElementById("hero-bg").style.backgroundImage=
    `url(https://image.tmdb.org/t/p/original${m.backdrop_path})`;
  document.getElementById("hero-title").innerText=m.title;
  document.getElementById("hero-overview").innerText=m.overview.substring(0,150)+"...";
}

function nextHero(){
  heroIndex=(heroIndex+1)%heroMovies.length;
  updateHero();
}

async function loadTrending(){
  sectionTitle.innerText="Trending Movies";
  const r=await fetch("/api/trending");
  displayMovies((await r.json()).results);
}

async function loadTopRated(){
  sectionTitle.innerText="Top Rated Movies";
  const r=await fetch("/api/toprated");
  displayMovies((await r.json()).results);
}

async function loadUpcoming(){
  sectionTitle.innerText="Upcoming Movies";
  const r=await fetch("/api/upcoming");
  displayMovies((await r.json()).results);
}

function displayMovies(movies){
  moviesDiv.innerHTML="";
  movies.forEach(m=>{
    moviesDiv.innerHTML+=`
      <div class="poster">
        <img src="https://image.tmdb.org/t/p/w500${m.poster_path}">
        <div class="poster-info">
          <div class="poster-title">${m.title}</div>
          <div class="poster-rating">⭐ ${m.vote_average}</div>
        </div>
      </div>`;
  });
}

loadHero();
loadTrending();
</script>

</body>
</html>
