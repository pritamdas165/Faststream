<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>MovieFlix v5</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Arial}
body{background:#000;color:#fff;padding-bottom:70px;overflow-x:hidden}

/* HEADER */
header{
  position:sticky;top:0;z-index:10;
  background:#111;padding:12px 15px;
  display:flex;justify-content:space-between;align-items:center
}
.logo{color:#e50914;font-size:22px;font-weight:bold}
#search{padding:6px;border-radius:4px;border:none;width:120px}

/* SECTION */
.section{padding:15px;position:relative}

/* SCROLL GRID */
.grid{
  display:flex;
  gap:10px;
  overflow-x:auto;
  scroll-snap-type:x mandatory;
  scroll-behavior:smooth
}
.grid::-webkit-scrollbar{display:none}

/* CARD */
.card{
  min-width:150px;
  background:#111;border-radius:6px;
  overflow:hidden;position:relative;
  scroll-snap-align:start;
  transition:transform .3s
}
.card:hover{transform:scale(1.05)}
.card img{width:100%;height:160px;object-fit:cover}
.card .info{padding:6px;font-size:12px}

/* LIKE */
.like{
  position:absolute;top:6px;right:6px;
  background:rgba(0,0,0,.6);
  padding:4px 6px;border-radius:50%;
  cursor:pointer
}
.like.active{color:red}

/* BUTTON */
button{border:none;border-radius:4px;padding:6px;font-size:11px;cursor:pointer}
.watch{background:#e50914;color:#fff;width:100%;margin-top:4px}
.download{background:#333;color:#fff;width:100%;margin-top:4px}

/* SCROLL ARROWS */
.arrow{
  position:absolute;top:40%;
  background:rgba(0,0,0,.7);
  padding:8px;border-radius:50%;
  cursor:pointer;z-index:5
}
.left{left:5px}
.right{right:5px}

/* MODAL + SMOOTH */
#modal{
  display:none;position:fixed;inset:0;
  background:rgba(0,0,0,.9);
  z-index:999;
  justify-content:center;align-items:center;
  animation:fade .4s
}
@keyframes fade{from{opacity:0}to{opacity:1}}
#modalContent{
  background:#111;padding:15px;
  border-radius:6px;width:90%
}

/* TRAILER */
iframe{width:100%;height:200px;margin-top:10px}

/* AD */
#adBox{
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.95);
  z-index:1000;
  flex-direction:column;
  justify-content:center;
  align-items:center
}

#adTimer{color:#e50914;margin-top:10px}

/* BOTTOM NAV */
.bottom-nav{
  position:fixed;bottom:0;width:100%;
  background:#111;display:flex;
  justify-content:space-around;padding:8px 0
}
.bottom-nav button{background:none;color:#aaa}
.bottom-nav .active{color:#e50914}
</style>
</head>

<body>

<header>
  <div class="logo">MovieFlix</div>
  <input id="search" placeholder="Search">
</header>

<div class="section">
  <div class="arrow left" onclick="scrollGrid(-1)">‹</div>
  <div class="arrow right" onclick="scrollGrid(1)">›</div>
  <div class="grid" id="movieGrid"></div>
</div>

<!-- MODAL -->
<div id="modal" onclick="closeModal()">
  <div id="modalContent" onclick="event.stopPropagation()"></div>
</div>

<!-- AD BOX -->
<div id="adBox" style="display:none">
  <div>Advertisement</div>
  <div id="adTimer">Wait 5s</div>
</div>


<div class="bottom-nav">
  <button class="active">Home</button>
  <button>Profile</button>
</div>

<script>

/* =========================
   SAFE ADS SYSTEM
========================= */
const POP_AD = "https://example.com"; // popup ad
const AD_DELAY = 5;
let adRunning = false;

function runAds(finalURL){
  if(adRunning) return;   // safety guard
  adRunning = true;

  // popup ad (user click based)
  window.open(POP_AD, "_blank");

  // show overlay ad
  adBox.style.display = "flex";

  let t = AD_DELAY;
  adTimer.innerText = "Wait " + t + "s";

  const timer = setInterval(()=>{
    t--;
    adTimer.innerText = "Wait " + t + "s";

    if(t <= 0){
      clearInterval(timer);
      adBox.style.display = "none";
      adRunning = false;
      window.location.href = finalURL;
    }
  },1000);
}

let movies=[
{
 title:"Dhoom 3",
 poster:"https://upload.wikimedia.org/wikipedia/en/4/4f/Dhoom_3_Film_Poster.jpg",
 trailer:"https://www.youtube.com/embed/yeF_b8EQcK0?autoplay=1",
 watch:"https://youtube.com",
 download:"#"
},
{
 title:"Love Me Love Me",
 poster:"https://www.mymovies.it/film/2026/love-me-love-me/poster/0/",
 trailer:"https://www.youtube.com/embed/B7prWpweShU?autoplay=1",
 watch:"#",
 download:"#"
}
];

let likes=JSON.parse(localStorage.getItem("likes"))||[];

function render(list){
 movieGrid.innerHTML="";
 list.forEach((m,i)=>{
  movieGrid.innerHTML+=`
  <div class="card">
    <div class="like ${likes.includes(i)?"active":""}" onclick="toggleLike(${i})">♥</div>
    <img src="${m.poster}" onclick="openModal(${i})">
    <div class="info">
      <b>${m.title}</b>
      <button class="watch" onclick="runAds('${m.watch}')">Watch</button>
      <button class="download" onclick="runAds('${m.download}')">Download</button>
    </div>
  </div>`;
 });
}

function openModal(i){
  modal.style.display="flex";
  modalContent.innerHTML=`
    <h3>${movies[i].title}</h3>
    <iframe src="${movies[i].trailer}" allow="autoplay; fullscreen"></iframe>
  `;
}

function closeModal(){modal.style.display="none";modalContent.innerHTML=""}

function toggleLike(i){
 likes.includes(i)?likes=likes.filter(x=>x!==i):likes.push(i);
 localStorage.setItem("likes",JSON.stringify(likes));
 render(movies);
}

let adRunning = false;

function runAds(url){
  if(adRunning) return;
  adRunning = true;

  window.open(POP_AD,"_blank");
  adBox.style.display="flex";

  let t = AD_DELAY;
  adTimer.innerText = "Wait " + t + "s";

  let timer = setInterval(()=>{
    t--;
    adTimer.innerText = "Wait " + t + "s";
    if(t <= 0){
      clearInterval(timer);
      adBox.style.display = "none";
      adRunning = false;
      window.location.href = url;
    }
  },1000);
}

function scrollGrid(dir){
 movieGrid.scrollBy({left:dir*200,behavior:"smooth"});
}

search.oninput=()=>{
 let q=search.value.toLowerCase();
 render(movies.filter(m=>m.title.toLowerCase().includes(q)));
}

render(movies);
</script>

</body>
</html>
