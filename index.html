<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>MovieFlix â€“ Version 3</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Arial,Helvetica,sans-serif}
body{background:#000;color:#fff;padding-bottom:70px}

/* HEADER */
header{
  background:#111;
  padding:15px;
  position:sticky;
  top:0;
  z-index:10;
}
.logo{color:#e50914;font-size:22px;font-weight:bold}

/* MOVIE GRID */
.section{padding:15px}
.grid{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:10px;
}
.card{
  background:#111;
  border-radius:6px;
  overflow:hidden;
}
.card img{
  width:100%;
  height:160px;
  object-fit:cover;
}
.info{padding:6px}
.info strong{font-size:12px;display:block}
.info button{
  width:100%;
  margin-top:4px;
  padding:6px;
  border:none;
  border-radius:4px;
  font-size:11px;
  cursor:pointer;
}
.watch{background:#e50914;color:#fff}
.download{background:#333;color:#fff}

/* AD OVERLAY (ONLY ON CLICK) */
#adBox{
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.9);
  z-index:999;
  align-items:center;
  justify-content:center;
  flex-direction:column;
  text-align:center;
}
#adBox a{
  color:#fff;
  margin-bottom:10px;
}
#adTimer{
  font-size:20px;
  color:#e50914;
}

/* BOTTOM NAV */
.bottom-nav{
  position:fixed;
  bottom:0;
  left:0;
  width:100%;
  background:#111;
  display:flex;
  justify-content:space-around;
  padding:8px 0;
  border-top:1px solid #222;
}
.bottom-nav button{
  background:none;
  border:none;
  color:#aaa;
  font-size:12px;
}
.bottom-nav .active{color:#e50914}
</style>
</head>

<body>

<header>
  <div class="logo">MovieFlix</div>
</header>

<div class="section">
  <div class="grid" id="movieGrid"></div>
</div>

<!-- AD BOX -->
<div id="adBox">
  <a id="adLink" href="#" target="_blank">Advertisement</a>
  <div id="adTimer">5</div>
</div>

<div class="bottom-nav">
  <button class="active">Home</button>
</div>

<script>
/* ================= CONFIG ================= */
const DIRECT_AD_URL = "https://example.com"; // direct ad
const POP_AD_URL = "https://example.com";    // popup ad
const AD_DELAY = 5;

/* ================= MOVIES (LOCAL) ================= */
const defaultMovies = [
{
 title:"Dhoom 3",
 poster:"https://upload.wikimedia.org/wikipedia/en/4/4f/Dhoom_3_Film_Poster.jpg",
 watch:"https://youtube.com",
 download:"https://example.com"
},
{
 title:"Love Me Love Me",
 poster:"https://www.mymovies.it/film/2026/love-me-love-me/poster/0/",
 watch:"https://youtu.be/B7prWpweShU",
 download:"https://example.com"
}
];

let movies = JSON.parse(localStorage.getItem("movies_v3"));
if(!movies){
  movies = defaultMovies;
  localStorage.setItem("movies_v3", JSON.stringify(movies));
}

/* ================= RENDER ================= */
function renderMovies(){
  const box=document.getElementById("movieGrid");
  box.innerHTML="";
  movies.forEach(m=>{
    box.innerHTML+=`
    <div class="card">
      <img src="${m.poster}">
      <div class="info">
        <strong>${m.title}</strong>
        <button class="watch" onclick="runAds('${m.watch}')">Watch</button>
        <button class="download" onclick="runAds('${m.download}')">Download</button>
      </div>
    </div>`;
  });
}

/* ================= ADS (ONLY ON CLICK) ================= */
function runAds(finalURL){
  window.open(POP_AD_URL,"_blank");

  const adBox=document.getElementById("adBox");
  const adTimer=document.getElementById("adTimer");
  const adLink=document.getElementById("adLink");

  adBox.style.display="flex";
  adLink.href=DIRECT_AD_URL;

  let t=AD_DELAY;
  adTimer.innerText=t;

  const timer=setInterval(()=>{
    t--;
    adTimer.innerText=t;
    if(t<=0){
      clearInterval(timer);
      adBox.style.display="none";
      window.location.href=finalURL;
    }
  },1000);
}

/* INIT */
renderMovies();
</script>

</body>
</html>
