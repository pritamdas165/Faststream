 <!DOCTYPE html>
<html>
<head>
<meta charset="UTF‚Äë8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NovaStream Live</title>

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
font-family:Segoe UI, sans-serif;
background:#0b0b0f;
color:#fff;
overflow-x:hidden;
}
.header{
position:fixed;top:0;width:100%;padding:15px 20px;
background:#111;z-index:1000;
}
.hero{
margin-top:60px;height:65vh;position:relative;overflow:hidden;
}
.hero img{
width:100%;height:100%;object-fit:cover;
}
.hero‚Äëoverlay{
position:absolute;bottom:15px;left:15px;
background:rgba(0,0,0,0.7);
padding:12px;border-radius:8px;
}
.section{padding:25px 20px}
.section h3{font-size:22px;margin-bottom:15px}
.row{display:flex;gap:15px;overflow-x:auto}
.card{min-width:150px;border-radius:12px;overflow:hidden;cursor:pointer}
.card img{width:100%;height:220px;object-fit:cover}
#detailsPage{display:none;padding:90px 20px}
.back-btn{
padding:8px 15px;background:#e50914;border:none;border-radius:20px;color:#fff;
cursor:pointer;margin-bottom:15px;
}
iframe{
width:100%;aspect-ratio:16/9;border-radius:12px;margin-top:20px;
}
</style>
</head>
<body>

<div class="header">
<h2>NovaStream</h2>
</div>

<div id="homePage">
<div class="hero" id="hero"></div>
<div class="section">
<h3>üî• Trending</h3>
<div class="row" id="trendingRow"></div>
</div>
</div>

<div id="detailsPage"></div>

<script>
const KEY="4fb15e4c918b39bd7a94e3e1f33772cb";
const API="https://api.themoviedb.org/3";
const IMG="https://image.tmdb.org/t/p";

/* SAFE FETCH WITH ERROR HANDLING */
async function fetchData(url){
try{
let res = await fetch(url);
if(!res.ok) throw new Error("Status: "+res.status);
return await res.json();
}catch(e){
console.error("Fetch failed:", e);
return null;
}
}

/* HERO LOAD */
async function loadHero(){
let data = await fetchData(`${API}/trending/movie/week?api_key=${KEY}`);
if(!data || !data.results || data.results.length === 0) return;

let movie = data.results[0];
document.getElementById("hero").innerHTML = `
<img src="${IMG}/original${movie.backdrop_path}">
<div class="hero-overlay">
<h2>${movie.title}</h2>
<p>‚≠ê ${movie.vote_average}</p>
</div>`;
}

/* TRENDING LOAD */
async function loadTrending(){
let data = await fetchData(`${API}/trending/movie/week?api_key=${KEY}`);
if(!data || !data.results) return;

const row = document.getElementById("trendingRow");
row.innerHTML = "";

data.results.forEach(m => {
if(!m.poster_path) return;
let card = document.createElement("div");
card.className = "card";
card.onclick = () => showDetails(m.id);
card.innerHTML = `<img src="${IMG}/w500${m.poster_path}">`;
row.appendChild(card);
});
}

/* DETAILS */
async function showDetails(id){
document.getElementById("homePage").style.display = "none";
let page = document.getElementById("detailsPage");
page.style.display = "block";

let data = await fetchData(`${API}/movie/${id}?api_key=${KEY}&append_to_response=videos`);
if(!data) {
page.innerHTML = "<p>Failed to load details</p>";
return;
}

let trailer = "";
if(data.videos && data.videos.results.length){
let t = data.videos.results.find(v => v.type==="Trailer");
if(t) trailer = `<iframe src="https://www.youtube.com/embed/${t.key}" allowfullscreen></iframe>`;
}

page.innerHTML = `
<button class="back-btn" onclick="goBack()">‚Üê Back</button>
<h2>${data.title}</h2>
<p>‚≠ê ${data.vote_average}</p>
<p>${data.overview}</p>
${trailer}
`;
}

function goBack(){
document.getElementById("detailsPage").style.display="none";
document.getElementById("homePage").style.display="block";
}

/* INIT */
loadHero();
loadTrending();
</script>

</body>
</html>
